---
title: "创建更新 | Microsoft 文档"
description: "使用 System Center Updates Publisher 创建和捆绑软件更新"
ms.custom: na
ms.date: 4/29/2017
ms.prod: configuration-manager
ms.reviewer: na
ms.suite: na
ms.technology: configmgr-other
ms.tgt_pltfrm: na
ms.topic: article
ms.assetid: 46a1a8ac-126c-4ee6-ae09-32dfbdb83368
caps.latest.revision: "1"
author: Brenduns
ms.author: brenduns
manager: angrobe
robots: NOINDEX, NOFOLLOW
ms.openlocfilehash: 98e490d7f5ca17dcf2a0aaa848f14e789f214123
ms.sourcegitcommit: 51fc48fb023f1e8d995c6c4eacfda7dbec4d0b2f
ms.translationtype: HT
ms.contentlocale: zh-CN
ms.lasthandoff: 08/07/2017
---
# <a name="create--software-updates-and-update-bundles-with-updates-publisher"></a>使用 Updates Publisher 创建软件更新和更新捆绑包

*适用范围：System Center Updates Publisher*

在 Updates Publisher 中，可以使用“创建更新”向导来创建你自己的更新，并能使用“创建捆绑包”向导来创建更新捆绑包。

由于这两个向导的工作流类似，因此更新捆绑包和更新的创建过程类似，只存在详述的相关区别。

## <a name="use-the-create-update-wizard"></a>使用“创建更新”向导
1.  在控制台中，转到“更新工作区”，然后在“入门”窗格中，从功能区的“开始”选项卡中选择“更新”。 此时，“创建更新”向导会打开。

2.  在“包”页面上，按以下说明操作来配置更新：

    -   选择“浏览”，查找将用作包源的软件更新包。 有效的包源包括 .MSI、.MSP 或 .EXE 文件。 更新发布服务器需要访问用来创建文件哈希的文件。 然后，哈希和文件名将用于要创建的更新的更新元数据。

    -   指定此更新的内容源位置。 通常，这是将更新二进制文件从发布过程下载到 WSUS 服务器的位置。  如果选择“使用本地源发布软件更新内容”选项，则不需要该路径。

        稍后，向 WSUS 服务器发布此更新时，更新发布服务器会从指示的源位置下载此更新的二进制文件。  如果不提供任何路径，则更新发布服务器将在[本地源发布路径](/sccm/sum/tools/updates-publisher-options#advanced)下搜索更新二进制文件。

    -   指定此软件更新的“二进制语言”。

    -   指定此更新的“成功返回代码”和“成功挂起重启代码”。 使用逗号分隔多个返回代码。 可以使用返回代码确定更新成功安装时间和需要重启的时间。

        -   Windows Installer 文件和修补程序（.MSI 和 .MSP 文件）自动设置这些值，无法进行修改。

        -   对于 .EXE 更新，如果未指定返回代码，则使用 .EXE 文件定义的默认代码。

    -   指定安装此软件更新所必需的任何命令行自变量。

        -   Windows Installer 文件和修补程序（.MSI 和 .MSP 文件）自动设置这些值。 对于这些文件类型，必须将自变量指定为**\[名称\]=\[值\]**。 此外，.MSI 或 .MSP 软件更新不支持以**/**（如 **/qn**）开头的所有选项。

        -   对于 .EXE 更新，所有自变量都有效。

3.  在“信息”页中，指定发布或导出此更新时包含的更新详细信息。 详细信息包括更新名称（标题）和说明等本地化属性。 然后，指定其他常规详细信息，如分类、供应商、产品和更新详情介绍位置。

     本地化属性：

    -   语言：选择一种语言，并指定标题和说明。 然后，可以选择其他语言，一次选择一种，同时指定每种语言支持的标题和说明。

    -   标题：输入此更新的名称。 此名称显示在 Updates Publisher 控制台的“更新工作区”中。

    -   说明：此更新的易懂说明。 可以添加更新安装内容以及应使用此更新的原因和时间。

     分类：以下是不同分类的常见描述。

    -   更新：当前安装的应用程序或文件的更新。

    -   关键更新：为解决特定问题而广泛发布的更新，旨在修复与安全无关的关键 bug。

    -   功能包：不通过产品发布分发的新产品功能，通常包含在下一版完整发布的产品中。

    -   安全更新程序：为解决与安全相关的产品专属问题而广泛发布的更新。

    -   更新汇总：一组累积的修补程序，它们打包在一起，以更便于部署。 这些修补程序可以包括安全更新、关键更新、其他更新等。 更新汇总通常解决特定领域的问题，如安全性或产品功能问题。

    -   Service Pack：一组累积的修补程序，将应用于应用程序。 这些修补程序可以包括安全更新、关键更新、软件更新等。

    -   工具：指定有助于完成一项或多项任务的工具或功能。

     -   驱动程序：驱动程序软件更新。

    供应商：指定此更新的供应商。 可以使用下拉列表使用存储库中更新的值。 指定供应商时，向导会在“更新工作区”中的“所有软件更新”下创建与相应供应商同名的文件夹（如果文件夹尚不存在的话）。 下面介绍了不能为创建的更新输入的 Windows Server Update Services (WSUS) 保留名称：
 >*   Microsoft Corporation
 >*   Microsoft
 >*   更新
 >*   软件更新
 >*   工具
 >*   工具
 >*   严重
 >*   关键更新
 >*   安全
 >*   安全更新
 >*   功能包
 >*   更新汇总
 >*   Service Pack
 >*   驱动程序
 >*   驱动程序更新
 >*   捆绑包
 >*   捆绑更新

产品：指定此更新适用的产品类型。 可以使用下拉列表使用存储库中更新的值。 不能用于“供应商”的同一 WSUS 保留名称列表也不能用于“产品”。

 更多信息 URL：指定详细介绍此更新的 URL。 输入此 URL 时，必须使用小写字母的 **https** 或 **http**。

4.  在“可选信息”页中，可以配置此更新的其他详细信息。

    -   公告 ID：公告 ID 通常是（但并不一定）由更新供应商提供。

    -   文章 ID：如果软件更新文章已发布，配置“文章 ID”将对要了解此更新的其他信息的人员非常有用。

    -   CVE ID：列出一个或多个通用漏洞披露 (CVE) 标识符，以提供有关此更新或更新捆绑包的安全信息。 列出多个标识符时，请使用分号分隔 CVE，如以下示例所示：*CVE1;CVE2*。

    -   支持 URL：列出包含此更新的支持信息（若有）的 URL。 输入此 URL 时，必须使用小写字母的 **https** 或 **http**。

    -   严重性：设置此更新的严重性级别。

    -   影响：以下选项可用于指定影响：
        -   普通 - 使用该选项可指明此更新需要典型安装过程。
        -   轻微 - 使用该选项可指明此更新需要最小安装过程。
        -   需要排他处理 - 使用该选项可指明此更新必须通过其本身安装，且排斥其他任何更新。   <br /><br />

    -   重启行为：使用此选项可提供更新重启行为的相关信息。 此设置不影响更新安装的实际行为。

        -   从不重启：计算机在安装此软件更新后从不执行系统重启。
        -   始终要求重启：计算机在安装此软件更新后始终执行系统重启。
        -   可以请求重启：在安装此软件更新后，计算机仅在有必要重启时才请求执行系统重启。 用户可以视需要推迟重启。 此为默认值。 <br /><br />

5.  在“先决条件”页，指定安装此更新前必须在计算机上安装的系统必备。 先决条件可以是 detectoids 或其他更新。 Detectoid 是诸如要求计算机 CPU 必须是 64 位处理器之类的简明规则。 Detectoid 还可以指定安装此更新前必须安装的特定更新。

    -   为了提升性能，可使用 Detectoid，而不用创建执行相同检查或操作的*可安装*和*已安装规则*。

    使用“可用的软件更新和 Detectoid”搜索选项帮助你查找特定更新或 Detectoid。 例如，在 **CPU** 上搜索可限制为根据特定 CPU 体系结构进行安装的 Detectoid。

    一次可以选择一项或多项，将其添加为先决条件。 添加先决条件时，选定的 Detectoid 作为一个或多个组进行添加。 计算机必须满足你配置的每个组中至少一个成员的要求，才符合安装条件：

 -   单击“添加先决条件”后，选择的所有项都会被单独添加到各个组中。 计算机必须满足此组中的先决条件，并通过已配置的其他任何组的要求验证，才符合此更新的安装条件。

 -   单击“添加组”后，选择的所有项都会被添加到一个组中。 计算机必须满足此组中的至少一个先决条件，并通过已配置的其他任何组的要求验证，才符合此更新的安装条件。

6.  在“取代”页，指定此更新替代（取代）的更新。 发布此更新后，Configuration Manager 会将所有被取代的更新标记为“已终止”。 然后，客户端会安装此更新来替代被取代的更新。

7.  在“适用性”页中，使用“规则编辑器”定义一组用于确定设备是否需要此更新的规则。 （此页面类似于跟随其后的“已安装”页。）

    若要添加新规则，请单击 ![新建规则](media/newrule.png)。 此时，“适用性规则”页会打开，可以在其中配置规则。

    可以创建的规则类型包括：

    -   文件 - 使用此规则可要求设备必须包含属性符合你指定的一个或多个条件的文件，然后才能应用此更新。

    -   注册表 - 使用此类型可指定必须有注册表详细信息，然后设备才符合此更新的安装条件。

    -   系统 - 此规则使用系统详细信息来确定适用性。 可以选择定义 Windows 版本、Windows 语言还是处理器体系结构，也可以指定 WMI 查询来标识设备操作系统。

    -   Windows Installer - 使用此规则类型可根据已安装的 .MSI 或 Windows Installer 修补程序 (.MSP) 确定适用性。 还可以确定是否已根据要求安装特定组件或功能。

        > [!IMPORTANT]  
        > 对于受管理设备，Windows 更新代理无法检测针对每个用户安装的 Windows Installer 包。 使用此规则类型时，请配置其他适用性规则（如文件版本或注册项值），以便能够正确地检测 Windows Installer 包，无论是针对每个用户安装，还是针对每个系统安装。

    -   保存的规则 - 使用此选项，可以查找和使用*在“规则工作区”中创建的*规则。

        创建规则后，可以使用其他图标修改规则，以定义这些规则之间的关系（如果有多个规则的话）。

    创建和添加完规则后，单击“创建规则集”对话框中的“确定”，保存规则集。 然后，可以创建**新**规则，并将它添加到规则集中。

    若有多个规则或规则集需要添加到更新中，可以使用“规则编辑器”中的逻辑运算符，确定各规则的关系条件及其处理顺序。

8.  在“已安装”页中，使用“规则编辑器”定义一组规则，用于确定设备是否已安装要配置的更新。 （此页面类似于在它前面的“适用性”页。）

    此向导页面支持使用“适用性”页面上的相同选项和条件配置规则。

    向导完成后，新的更新会添加到“更新工作区”中的一个节点，该节点是通过对此更新使用的“供应商”和“产品”名称进行标识的。

## <a name="use-the-create-bundle-wizard"></a>使用“创建捆绑包”向导
由于此向导使用与[“创建更新”向导](#use-the-create-update-wizard)相同的工作流，因此工作流基本不变，但请注意“创建捆绑包”向导的以下区别：

1.  若要启动向导，在控制台中，转到“更新工作区”，然后从功能区的“开始”选项卡中选择“捆绑包”。

2.  与“创建更新”向导不同，创建捆绑包时没有“包”页面。

3.  在“信息”页中，指定发布或导出此更新时包含的更新捆绑包详细信息。

4.  在“可选信息”页中，可以配置此更新捆绑包的其他详细信息。 可用选项与创建更新时相同。 不过，无法使用“影响”和“重启行为”选项，因为它们并不适用于捆绑包。

5.  在“先决条件”页中，指定安装此捆绑包前必须在计算机上安装的系统必备。 这些规则与安装各个更新时看到的规则相同。

6.  在“取代”页中，指定此更新捆绑包替代（取代）的更新。 这些规则与安装各个更新时看到的规则相同。

7.  在“成员”页中，选择要添加到更新捆绑包中的更新。 只能添加已创建或已导入 Updates Publisher 的更新。

向导完成后，新的更新捆绑包会添加到“更新工作区”中由对此更新捆绑包使用的“供应商”名称标识的节点。
