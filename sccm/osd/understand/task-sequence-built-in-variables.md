---
title: Variáveis internas de sequência de tarefas
titleSuffix: Configuration Manager
description: As variáveis internas da sequência de tarefas fornecem informações sobre o ambiente no qual a sequência de tarefas é executada e estão disponíveis durante toda a sequência de tarefas.
ms.date: 04/18/2018
ms.prod: configuration-manager
ms.technology: configmgr-osd
ms.topic: conceptual
ms.assetid: 02bc6bd4-ca53-4e22-8b80-d8ee5fe72567
author: aczechowski
ms.author: aaroncz
manager: dougeby
ms.openlocfilehash: d3ea1b35c5f220155cecafddaf3a2ff1acf5ed53
ms.sourcegitcommit: 0b0c2735c4ed822731ae069b4cc1380e89e78933
ms.translationtype: HT
ms.contentlocale: pt-BR
ms.lasthandoff: 05/03/2018
---
# <a name="task-sequence-built-in-variables-in-system-center-configuration-manager"></a>Variáveis internas de sequência de tarefas no System Center Configuration Manager

*Aplica-se a: System Center Configuration Manager (Branch Atual)*


 As variáveis internas da sequência de tarefas são fornecidas pelo System Center Configuration Manager. Variáveis internas fornecem informações sobre o ambiente em que a sequência de tarefas está executando e seus valores estão disponíveis em toda a sequência de tarefas. Normalmente, as variáveis internas são inicializadas antes de as etapas serem executadas na sequência de tarefas. Por exemplo, a variável interna **_SMSTSLogPath** é uma variável de ambiente que especifica o caminho que os componentes do Configuration Manager usam para gravar arquivos de log. Qualquer etapa de sequência de tarefas pode acessar essa variável de ambiente. No entanto, a sequência de tarefas avalia algumas variáveis, como **&#95;SMSTSCurrentActionName**, antes de cada etapa. Os valores são lidos apenas para variáveis internas com um nome que começa com um sublinhado.  

## <a name="task-sequence-built-in-variable-list"></a>Lista de variáveis internas de sequência tarefa  
 A lista a seguir descreve as variáveis internas disponíveis no Configuration Manager:  

|Nome da variável interna|Descrição|  
|-----------------------------|-----------------|  
|_OSDDetectedWinDir|A sequência de tarefas verifica unidades de disco rígido do computador em busca de uma instalação de sistema operacional anterior quando o Windows PE é iniciado. O local da pasta do Windows é armazenado nessa variável. Você pode configurar sua sequência de tarefas para recuperar esse valor do ambiente e usá-lo a fim de especificar o mesmo local da pasta do Windows a ser usado para a nova instalação do sistema operacional.|  
|_OSDDetectedWinDrive|A sequência de tarefas verifica unidades de disco rígido do computador em busca de uma instalação de sistema operacional anterior quando o Windows PE é iniciado. O local do disco rígido onde o sistema operacional é instalado é armazenado nessa variável. Você pode configurar sua sequência de tarefas para recuperar esse valor do ambiente e usá-lo a fim de especificar o mesmo local de disco rígido a ser usado para o novo sistema operacional.|  
|_SMSTSAdvertID|Armazena a ID exclusiva da atual implantação de sequência de tarefas em execução Ele usa o mesmo formato que uma ID de implantação de distribuição de software do Configuration Manager. Se a sequência de tarefas estiver sendo executada por meio de uma mídia autônoma, esta variável não será definida.<br /><br /> Exemplo:<br /><br /> **ABC20001**|  
|_TSAppInstallStatus|A sequência de tarefas define a variável _TSAppInstallStatus de acordo com o status de instalação para o aplicativo durante a etapa [Instalar Aplicativo](task-sequence-steps.md#BKMK_InstallApplication). A sequência de tarefas define a variável com um dos seguintes valores:<br /><br /> 1. **Indefinido**: a etapa Instalar Aplicativo não foi executada.<br />2. **Erro**: pelo menos um aplicativo falhou devido a um erro durante a etapa Instalar Aplicativo.<br />3. **Aviso**: nenhum erro ocorre durante a etapa Instalar Aplicativo. Um ou mais aplicativos, ou uma dependência necessária, não foram instalados porque um requisito não foi atendido.<br />4. **Êxito**: não há nenhum erro ou aviso detectado durante a etapa Instalar Aplicativo.|  
|_SMSTSBootImageID|Se a sequência de tarefas em execução no momento fizer referência a um pacote de imagem de inicialização, essa variável armazenará a ID do pacote da imagem de inicialização. Se a sequência de tarefas não fizer referência a um pacote de imagem de inicialização, essa variável não será definida.<br /><br /> Exemplo:<br /><br /> **ABC00001**|  
|_SMSTSBootUEFI|A sequência de tarefas define a variável SMSTSBootUEFI quando ela detecta um computador no modo UEFI.|  
|_SMSTSClientGUID|Armazena o valor da GUID do cliente do Configuration Manager. Essa variável não é definida se estiver executando a sequência de tarefas de mídia autônoma.<br /><br /> Exemplo:<br /><br /> **0a1a9a4b-fc56-44f6-b7cd-c3f8ee37c04c**|  
|_SMSTSCurrentActionName|Especifica o nome da etapa de sequência de tarefas em execução no momento. Essa variável é definida antes que o gerenciador de sequência de tarefas seja executado a cada etapa individual.<br /><br /> Exemplo:<br /><br /> **executar linha de comando**|  
|_SMSTSDownloadOnDemand|Se a sequência de tarefas atual estiver em execução no modo de download sob demanda, essa variável será **true**. O modo de download sob demanda significa que o gerenciador de sequência de tarefas baixa o conteúdo localmente apenas quando ele precisar acessar o conteúdo.|  
|_SMSTSInWinPE|Quando a etapa da sequência de tarefas atual estiver em execução no Windows PE, essa variável será **true**. Teste essa variável de sequência de tarefas para determinar o ambiente do sistema operacional atual.|  
|_SMSTSLastActionRetCode|Armazena o código de retorno que foi retornado pela última ação que foi executada. Essa variável pode ser usada como uma condição para determinar se a próxima etapa é executada.<br /><br /> Exemplo:<br /><br /> **0**|  
|_SMSTSLastActionSucceeded|Se a última etapa for bem-sucedida, essa variável será **true**. Se a última etapa falhar, será **false**. Se a sequência de tarefas ignorar a última ação porque a etapa foi desabilitada ou a condição associada foi avaliada como **false**, essa variável não será redefinida. Ela ainda mantém o valor para a ação anterior.|  
|_SMSTSLaunchMode|Especifica um dos seguintes métodos de inicialização de sequência de tarefas:<br /><br /> -   **SMS**: a sequência de tarefas é iniciada do cliente do Configuration Manager<br />-   **UFD**: a sequência de tarefas é iniciada da mídia USB herdada<br />-   **UFD+FORMAT**: a sequência de tarefas é iniciada da mídia USB mais recente<br />-   **CD**: a sequência de tarefas é iniciada de um CD<br />-   **DVD**: a sequência de tarefas é iniciada de um DVD<br />-   **PXE**: a sequência de tarefas é iniciada de PXE<br />-   **HD**: a sequência de tarefas é iniciada da mídia pré-configurada em um disco rígido|  
|_SMSTSLogPath|Armazena o caminho completo do diretório de log. Use esse valor para determinar quais ações são registradas. Esse valor não é definido quando um disco rígido não estiver disponível.|  
|_SMSTSMachineName|Armazena e especifica o nome do computador. Armazena o nome do computador que a sequência de tarefas usa para registrar todas as mensagens de status. Para alterar o nome do computador no novo sistema operacional, use a variável **OSDComputerName** .<br /><br /> Exemplo:<br /><br /> **ABC**|  
|_SMSTSMDataPath|Especifica o caminho definido pela variável SMSTSLocalDataDrive. Quando você define SMSTSLocalDataDrive antes do início da sequência de tarefas, como ao definir uma variável de coleta, o Configuration Manager define a variável _SMSTSMDataPath depois que a sequência de tarefas é iniciada.|  
|_SMSTSMediaType|Especifica o tipo de mídia que é usada para iniciar a instalação. Exemplos de tipos de mídia são mídia de inicialização, mídia cheia, PXE e mídia pré-configurada.|  
|_SMSTSMP|Armazena a URL ou endereço IP de um ponto de gerenciamento do Configuration Manager.|  
|_SMSTSMPPort|Armazena o número da porta do ponto de gerenciamento de um ponto de gerenciamento do Configuration Manager.<br /><br /> Exemplo:<br /><br /> **80**|  
|_SMSTSOrgName|Armazena o nome do título de identidade visual que a sequência de tarefas exibe na caixa de diálogo de progresso.<br /><br /> Exemplo:<br /><br /> **Empresa XYZ**|  
|_SMSTSOSUpgradeActionReturnCode|Armazena o valor do código de saída que a Instalação do Windows retorna para indicar êxito ou falha. Essa variável é definida durante a etapa da sequência de tarefas [Atualizar Sistema Operacional](task-sequence-steps.md#BKMK_UpgradeOS). Essa variável é útil com a opção de linha de comando /Compat.<br /><br /> Exemplo:<br /><br /> Após a conclusão de /Compat, execute ações nas etapas posteriores dependendo do código de saída de falha ou de êxito. Em caso de êxito, inicie o upgrade. Ou então, defina um marcador no ambiente (por exemplo, adicione um arquivo ou defina uma chave do Registro) a ser coletado com o inventário de hardware. Use esse marcador para criar uma coleção de computadores que estão prontos para upgrade ou que exigem uma ação antes do upgrade.|  
|_SMSTSPackageID|Armazena a ID da atual sequência de tarefas em execução Esta ID usa o mesmo formato que uma ID de pacote de software do Configuration Manager.<br /><br /> Exemplo:<br /><br /> **HJT00001**|  
|_SMSTSPackageName|Armazena o nome da sequência de tarefas atual em execução especificada pelo administrador do Configuration Manager quando ela é criada.<br /><br /> Exemplo:<br /><br /> **Implantar a sequência de tarefas do Windows 10**|  
|_SMSTSSetupRollback|Especifica se a Instalação do sistema operacional executou uma operação de reversão. Os valores das variáveis podem ser **true** ou **false**.|  
|_SMSTSRunFromDP|Definido como **true** se a sequência de tarefas atual estiver em execução no modo de execução do ponto de distribuição, o que significa que o gerenciador de sequência de tarefas obtém o pacote necessário para compartilhamentos de ponto de distribuição.|  
|_SMSTSSiteCode|Especifica o código do site do Configuration Manager.<br /><br /> Exemplo:<br /><br /> **ABC**|  
|_SMSTSType|Especifica o tipo da sequência de tarefas em execução atual. Ele pode ter os seguintes valores:<br /><br /> **1** - indica uma sequência de tarefas genéricas.<br /><br /> **2** - indica uma sequência de tarefas de implantação do sistema operacional.|  
|_SMSTSTimezone|A variável _SMSTSTimezone armazena as informações de fuso horário no seguinte formato (sem espaços):<br /><br /> Diferença, DiferençaPadrão, DiferençaDoHorárioDeVerão, DataPadrão.wAno, wMês, wDiaDaSemana, wDia, wHora, wMinuto, wSegundo, wMilissegundos, DataDoHorárioDeVerão.wAno, wMês, wDiaDaSemana, wDia, wHora, wMinuto, wSegundo, wMilissegundos, NomePadrão, NomePadrão<br /><br /> Exemplo:<br /><br /> Para a hora do Leste dos Estados Unidos e Canadá, o valor seria **300,0,-60,0,11,0,1,2,0,0,0,0,3,0,2,2,0,0,0 hora oficial do Leste dos EUA, o horário de verão do Leste**|  
|_SMSTSUseCRL|Quando a sequência de tarefas usa HTTPS para se comunicar com o ponto de gerenciamento, especifica se ela usa a CRL (lista de certificados revogados).|  
|_SMSTSUserStarted|Especifica se uma sequência de tarefas é iniciada por um usuário. Essa variável é definida somente se a sequência de tarefas é iniciada por meio do Centro de Software. Por exemplo, se **_SMSTSLaunchMode** está definido como **SMS**. A variável pode ter os seguintes valores:<br /><br /> -   **true** - Especifica que a sequência de tarefas é iniciada manualmente por um usuário por meio do Centro de Software.<br />-   **false** – especifica que a sequência de tarefas é iniciada automaticamente pelo agendador do Configuration Manager.|  
|_SMSTSUseSSL|Especifica se a sequência de tarefas usa SSL para se comunicar com o ponto de gerenciamento do Configuration Manager. Se seu site estiver em execução no modo nativo, o valor é definido como **true**.|  
|_SMSTSWTG|Especifica se o computador está executando como um dispositivo Windows To Go.|  
|OSDPreserveDriveLetter|Esta variável de sequência de tarefas foi preterida. Durante uma implantação de sistema operacional, por padrão, a Instalação do Windows determina a melhor letra da unidade a ser usada (geralmente, C:). <br /><br />Comportamento anterior: ao aplicar uma imagem, a variável OSDPreverveDriveLetter determina se a sequência de tarefas usa ou não a letra da unidade capturada no arquivo da imagem (.WIM). Defina o valor desta variável como **False** para usar o local especificado para a configuração **Destino** na etapa da sequência de tarefas **Aplicar Sistema Operacional**. Para obter mais informações, consulte [Apply Operating System Image](task-sequence-steps.md#BKMK_ApplyOperatingSystemImage).|  
|SMSTSAssignmentsDownloadInterval|O número de segundos para aguardar antes que o cliente tente baixar a política desde a última tentativa que não retornou nenhuma política. Por padrão, o cliente aguarda **0** segundos antes de tentar novamente.<br /><br /> Você pode definir essa variável usando um comando prestart da mídia ou PXE.|  
|SMSTSAssignmentsDownloadRetry|O número de vezes que um cliente tentará baixar a política depois que nenhuma política foi encontrada na primeira tentativa. Por padrão, o cliente tenta novamente **0** vezes.<br /><br /> Você pode definir essa variável usando um comando prestart da mídia ou PXE.|  
|SMSTSAssignUsersMode|Especifica como uma sequência de tarefas associa os usuários ao computador de destino. Defina a variável para um dos seguintes valores:<br /><br /> -   **Automático**: a sequência de tarefas cria uma relação entre os usuários especificados e o computador de destino quando implanta o sistema operacional no computador de destino.<br />-   **Pendente**: a sequência de tarefas cria uma relação entre os usuários especificados e o computador de destino. Um administrador precisa aprovar a relação para configurá-la.<br />-   **Desabilitado**: a sequência de tarefas não associa os usuários ao computador de destino ao implantar o sistema operacional.|  
|SMSTSDownloadAbortCode|Essa variável contém o valor do código “anular” para a ferramenta de download de programa externo (especificado na variável SMSTSDownloadProgram). Se o programa retornar um código de erro igual ao valor da variável SMSTSDownloadAbortCode, o download do conteúdo falhará e nenhum outro método de download será tentado.
|SMSTSDownloadProgram|Use essa variável para especificar um Provedor de Conteúdo Alternativo, um programa de download usado para baixar conteúdo em vez do programa de download padrão do Configuration Manager, para a sequência de tarefas. Como parte do processo de download do conteúdo, a sequência de tarefas verifica a variável para um programa de download especificado. Se especificado, a sequência de tarefas executa o programa para realizar o download.|  
|SMSTSDownloadRetryCount|O número de vezes que o Configuration Manager tenta baixar o conteúdo de um ponto de distribuição. Por padrão, o cliente tenta novamente **2** vezes.|  
|SMSTSDownloadRetryDelay|O número de segundos que o Configuration Manager aguarda antes de tentar baixar conteúdo novamente de um ponto de distribuição. Por padrão, o cliente aguarda **15** segundos antes de tentar novamente.|
|SMSTSDriverReceiveTimeOut|O número de segundos antes de o tempo limite da conexão para o servidor ser atingido.|
|SMSTSErrorDialogTimeout|Quando ocorre um erro em uma sequência de tarefas, ele exibe uma caixa de diálogo com o erro. A sequência de tarefas a descarta automaticamente após o número de segundos especificado por essa variável. Por padrão, este valor é **900** segundos (15 minutos).|  
| TSDisableProgressUI | <!-- 1354291 --> Começando pelo Configuration Manager versão 1706, use essa variável para controlar quando a sequência de tarefas exibe o progresso para usuários finais. Para ocultar ou exibir o andamento em momentos diferentes, defina essa variável várias vezes em uma sequência de tarefas. Para ocultar o andamento da sequência de tarefas, defina o valor dessa variável para **True**. Para exibir o andamento da sequência de tarefas, defina o valor dessa variável para **False**. | 
| SMSTSDisableStatusRetry | <!--512358--> Em cenários desconectados, o mecanismo de sequência de tarefas tenta repetidamente enviar mensagens de status ao ponto de gerenciamento. Esse comportamento neste cenário causa atrasos no processamento da sequência de tarefas. A partir da versão 1802 do Configuration Manager, defina essa variável como **True** e o mecanismo de sequência de tarefas não tentará enviar mensagens de status após a primeira falha de envio. Essa primeira tentativa inclui várias novas tentativas.<br/><br/>Quando a sequência de tarefas for reiniciada, o valor dessa variável persistirá. No entanto, a sequência de tarefas tenta enviar uma mensagem de status inicial. Essa primeira tentativa inclui várias novas tentativas. Se for bem-sucedida, a sequência de tarefas continuará a enviar o status, independentemente do valor dessa variável. Se o status falhar ao enviar, a sequência de tarefas usará o valor dessa variável.<br/><br/>OBSERVAÇÃO: [o relatório de status da sequência de tarefas](/sccm/core/servers/manage/list-of-reports#task-sequence---deployment-status) depende dessas mensagens de status para exibir o progresso, o histórico e os detalhes de cada etapa. | 
|SMSTSLanguageFolder|Use essa variável para alterar o idioma de exibição de uma imagem de inicialização neutra de idioma.|  
|SMSTSLocalDataDrive|Especifica onde os arquivos temporários são armazenados no computador de destino enquanto a sequência de tarefas está em execução.<br /><br /> Essa variável deve ser definida antes do início da sequência de tarefas, como definindo uma variável de coleta. Depois de iniciada a sequência de tarefas, o Configuration Manager define a variável _SMSTSMDataPath depois que a sequência de tarefas é iniciada.|  
|SMSTSMP|Use esta variável para especificar a URL ou endereço IP de um ponto de gerenciamento do Configuration Manager.|  
|SMSTSPeerDownload|Use essa variável para habilitar o cliente a usar o Cache de sistemas pares do Windows PE.<br /><br /> Exemplo:<br /><br /> SMSTSPeerDownload = **TRUE** habilita essa funcionalidade.|  
|SMSTSPeerRequestPort|Uma porta de rede personalizada que usa o cache par do Windows PE para a difusão inicial. A porta padrão configurada nas configurações do cliente é a 8004.|  
|SMSTSPersistContent|Use essa variável para manter temporariamente o conteúdo no cache da sequência de tarefas.|  
|SMSTSPostAction|Especifica um comando que é executado após a sequência de tarefas. Por exemplo, você pode usar essa variável para especificar um script que permite filtros de gravação em dispositivos inseridos depois que o a sequência de tarefas implanta um sistema operacional no dispositivo.|  
|SMSTSPreferredAdvertID|Força a sequência de tarefas a executar uma implantação direcionada específica no computador de destino. Defina essa variável por meio de um comando prestart de mídia ou PXE. Se essa variável for definida, a sequência de tarefas substitui todas as implantações necessárias.|  
|SMSTSPreserveContent|Essa variável sinaliza o conteúdo na sequência de tarefas a ser mantido no cache do cliente do Configuration Manager após a implantação. Essa variável é diferente de SMSTSPersistContent, que preserva o conteúdo apenas durante a sequência de tarefas. SMSTSPersistContent usa o cache de sequência de tarefas, SMSTSPreserveContent usa o cache de cliente do Configuration Manager.<br /><br /> Exemplo:<br /><br /> SMSTSPreserveContent = **TRUE** habilita essa funcionalidade.|  
|SMSTSRebootDelay|Especifica o número de segundos a esperar antes do computador ser reiniciado. Se esta variável for zero (0), o gerenciador de sequência de tarefas não exibirá uma caixa de diálogo de notificação antes da reinicialização.<br /><br /> Exemplos:<br /><br /> **0**: não exibir uma notificação<br /><br /> **60**: exibir uma notificação por um minuto|  
|SMSTSRebootMessage|Especifica a mensagem a ser exibida na caixa de diálogo de notificação de reinicialização. Se essa variável não for definida, será exibida uma mensagem padrão.<br /><br /> Exemplo:<br /><br /> **A sequência de tarefas está reiniciando o computador**.|  
|SMSTSRebootRequested|Indica que uma reinicialização será solicitada após a etapa da sequência de tarefas atual ser concluída. Se uma reinicialização for necessária, basta definir essa variável como **true**, e o Gerenciador de sequência de tarefas reiniciará o computador após essa etapa de sequência de tarefas. Se a etapa de sequência de tarefas exigir uma reinicialização para concluir a ação, defina essa variável. Depois que o computador é reiniciado, a sequência de tarefas continua sendo executada na próxima etapa da sequência de tarefas.|  
|SMSTSRetryRequested|Solicita uma nova tentativa após a etapa atual ser concluída. Se essa variável de sequência de tarefas for definida, o **SMSTSRebootRequested** também deve ser definido como **true**. Depois que o computador for reiniciado, o Gerenciador de sequência de tarefas executará novamente a mesma etapa de sequência de tarefas.|  
|SMSTSUDAUsers|Especifica os usuários primários do computador de destino usando o seguinte formato:<br /><br /> Exemplo:<br /><br /> **domínio\usuário1, domínio\usuário2, domínio\usuário3**<br /><br /> Separe vários usuários usando uma vírgula (,). Para mais informações, consulte [Associar usuários a um computador de destino](../get-started/associate-users-with-a-destination-computer.md).|  
 
