---
title: "Variáveis internas da sequência de tarefas | Configuration Manager"
description: "As variáveis internas da sequência de tarefas fornecem informações sobre o ambiente no qual a sequência de tarefas é executada e estão disponíveis durante toda a sequência de tarefas."
ms.custom: na
ms.date: 10/06/2016
ms.prod: configuration-manager
ms.reviewer: na
ms.suite: na
ms.technology:
- configmgr-osd
ms.tgt_pltfrm: na
ms.topic: article
ms.assetid: 02bc6bd4-ca53-4e22-8b80-d8ee5fe72567
caps.latest.revision: 15
caps.handback.revision: 0
author: Dougeby
ms.author: dougeby
manager: angrobe
translationtype: Human Translation
ms.sourcegitcommit: 1134bb2f04152288e72d40b1b1083f415cb4e900
ms.openlocfilehash: 4b1014bc9a5c17dd571e69e7f5bfdae060a3eb55


---
# <a name="task-sequence-built-in-variables-in-system-center-configuration-manager"></a>Variáveis internas de sequência de tarefas no System Center Configuration Manager

*Aplica-se a: System Center Configuration Manager (Branch Atual)*


 As variáveis internas da sequência de tarefas são fornecidas pelo System Center Configuration Manager. Variáveis internas fornecem informações sobre o ambiente em que a sequência de tarefas está executando e seus valores estão disponíveis em toda a sequência de tarefas. Normalmente, as variáveis internas são inicializadas antes de as etapas serem executadas na sequência de tarefas. Por exemplo, a variável interna **_SMSTSLogPath** é uma variável de ambiente que especifica o caminho que os componentes do Configuration Manager usam para gravar arquivos de log enquanto a sequência de tarefas é executada; qualquer etapa de sequência de tarefas pode acessar essa variável de ambiente. No entanto, algumas variáveis, como _SMSTSCurrentActionName, são avaliadas antes de cada etapa. Os valores das variáveis internas são geralmente somente leitura. Os valores são lidos apenas para variáveis internas com um nome que começa com um sublinhado.  

## <a name="task-sequence-built-in-variable-list"></a>Lista de variáveis internas de sequência tarefa  
 A lista a seguir descreve as variáveis internas disponíveis no Configuration Manager:  

|Nome da variável interna|Descrição|  
|-----------------------------|-----------------|  
|_OSDDetectedWinDir|A partir do Configuration Manager versão 1602, a sequência de tarefas verifica o disco rígido do computador em busca de uma instalação de sistema operacional anterior quando o Windows PE é iniciado. O local da pasta do Windows é armazenado nessa variável. Você pode configurar sua sequência de tarefas para recuperar esse valor do ambiente e usá-lo a fim de especificar o mesmo local da pasta do Windows a ser usado para a nova instalação do sistema operacional.|  
|_OSDDetectedWinDrive|A partir do Configuration Manager versão 1602, a sequência de tarefas verifica o disco rígido do computador em busca de uma instalação de sistema operacional anterior quando o Windows PE é iniciado.  O local do disco rígido onde o sistema operacional é instalado é armazenado nessa variável. Você pode configurar sua sequência de tarefas para recuperar esse valor do ambiente e usá-lo a fim de especificar o mesmo local de disco rígido a ser usado para o novo sistema operacional.|  
|_SMSTSAdvertID|Armazena a ID exclusiva da atual implantação de sequência de tarefas em execução Ele usa o mesmo formato que uma ID de implantação de distribuição de software do Configuration Manager. Se a sequência de tarefas estiver sendo executada por meio de uma mídia autônoma, esta variável não será definida.<br /><br /> Exemplo:<br /><br /> **ABC20001**|  
|_TSAppInstallStatus|a sequência de tarefa define a variável _TSAppInstallStatus de acordo com o status de instalação para o aplicativo durante a etapa da sequência de tarefa Instalar Aplicativo. A sequência de tarefas define a variável com um dos seguintes valores:<br /><br /> 1.  **Indefinido**: definido quando a etapa da sequência de tarefas Instalar Aplicativo não foi executada.<br />2.  **Erro**: definido quando, pelo menos, um aplicativo falhou devido a um erro durante a etapa da sequência de tarefas Instalar Aplicativo.<br />3.  **Aviso**: definido quando não ocorrem erros durante a etapa da sequência de tarefas Instalar Aplicativo, mas um ou mais aplicativos, ou uma dependência necessária, não foram instalados pois um requisito não foi atingido.<br />4.  **Êxito**: definido quando não houver nenhum erro ou aviso detectado durante a etapa da sequência de tarefas Instalar Aplicativo.|  
|_SMSTSBootImageID|Armazenará a ID do pacote de imagem de inicialização do Configuration Manager se um pacote de imagem de inicialização estiver associado à sequência de tarefas atual em execução. A variável não será definida se nenhum pacote de imagem de inicialização do Configuration Manager estiver associado.<br /><br /> Exemplo:<br /><br /> **ABC00001**|  
|_SMSTSBootUEFI|A sequência de tarefas define a variável SMSTSBootUEFI quando ela detecta um computador no modo UEFI.|  
|_SMSTSClientGUID|Armazena o valor da GUID do cliente do Configuration Manager. Essa variável não é definida se estiver executando a sequência de tarefas de mídia autônoma.<br /><br /> Exemplo:<br /><br /> **0a1a9a4b-fc56-44f6-b7cd-c3f8ee37c04c**|  
|_SMSTSCurrentActionName|Especifica o nome da etapa de sequência de tarefas em execução no momento. Essa variável é definida antes que o gerenciador de sequência de tarefas seja executado a cada etapa individual.<br /><br /> Exemplo:<br /><br /> **executar linha de comando**|  
|_SMSTSDownloadOnDemand|Definido como **true** se a sequência de tarefas atual estiver em execução no modo de download sob demanda, o que significa que o gerenciador de sequência de tarefas baixa o conteúdo localmente apenas quando ele precisar acessar o conteúdo.|  
|_SMSTSInWinPE|Essa variável é definida como **true** quando a etapa atual está sendo executado no ambiente do Windows PE e como **false** se não for. Você pode testar essa variável de sequência de tarefas para determinar o ambiente do sistema operacional atual.|  
|_SMSTSLastActionRetCode|Armazena o código de retorno que foi retornado pela última ação que foi executada. Essa variável pode ser usada como uma condição para determinar se a próxima etapa é executada.<br /><br /> Exemplo:<br /><br /> **0**|  
|_SMSTSLastActionSucceeded|A variável é definida como **true** se a última ação foi bem-sucedida e a **false** se a última ação falhou. Se a última ação foi ignorada porque a etapa foi desabilitada ou a condição associada é avaliada como **false**, essa variável não é redefinida, o que significa que ela ainda mantém o valor para a ação anterior.|  
|_SMSTSLaunchMode|Especifica o método de inicialização de sequência de tarefas. A sequência de tarefas pode ter os seguintes valores:<br /><br /> -   **SMS** – especifica que a sequência de tarefas é iniciada usando o cliente do Configuration Manager.<br />-   **UFD** - Especifica que a sequência de tarefas é iniciada usando mídia USB e que a mídia USB foi criada no Windows XP/2003.<br />-   **UFD+FORMAT** - Especifica que a sequência de tarefas é iniciada usando mídia USB e que a mídia USB foi criada no Windows Vista ou posterior.<br />-   **CD** - Especifica que a sequência de tarefas é iniciada usando um CD.<br />-   **DVD** - Especifica que a sequência de tarefas é iniciada usando um DVD.<br />-   **PXE** - Especifica que a sequência de tarefas é iniciada do PXE.<br />-   **HD** – especifica que a sequência de tarefas foi iniciada de um disco rígido (somente mídia pré-configurada).|  
|_SMSTSLogPath|Armazena o caminho completo do diretório de log. Isso pode ser usado para determinar quais ações são registradas. Esse valor não é definido quando um disco rígido não estiver disponível.|  
|_SMSTSMachineName|Armazena e especifica o nome do computador. Armazena o nome do computador que usará a sequência de tarefas para registrar todas as mensagens de status. Para alterar o nome do computador no novo sistema operacional, use a variável **OSDComputerName** .<br /><br /> Exemplo:<br /><br /> **ABC**|  
|_SMSTSMDataPath|Especifica o caminho definido pela variável SMSTSLocalDataDrive. Quando você define SMSTSLocalDataDrive antes do início da sequência de tarefas, como ao definir uma variável de coleta, o Configuration Manager define a variável _SMSTSMDataPath depois que a sequência de tarefas é iniciada.|  
|_SMSTSMediaType|Especifica o tipo de mídia que é usada para iniciar a instalação. Exemplos de tipos de mídia são mídia de inicialização, mídia cheia, PXE e mídia pré-configurada.|  
|_SMSTSMP|Armazena o nome ou endereço IP de um ponto de gerenciamento do Configuration Manager.|  
|_SMSTSMPPort|Armazena o número da porta do ponto de gerenciamento de um ponto de gerenciamento do Configuration Manager.<br /><br /> Exemplo:<br /><br /> **80**|  
|_SMSTSOrgName|Armazena o nome do título de identidade visual exibido na caixa de diálogo de interface de usuário da sequência de tarefas em andamento.<br /><br /> Exemplo:<br /><br /> **Empresa XYZ**|  
|_SMSTSOSUpgradeActionReturnCode|Armazena o valor de código de saída retornado da Instalação para indicar êxito ou falha.  Essa variável é definida durante a etapa da sequência de tarefas Atualização do sistema operacional. Isso é útil com a opção de linha de comando /Compat da Instalação do Windows 10.<br /><br /> Exemplo:<br /><br /> Após a conclusão de /Compat, você pode executar ações nas etapas posteriores, dependendo do código de saída de falha ou êxito. Em caso de êxito, é possível iniciar a atualização. Ou você pode definir um marcador no ambiente (por exemplo, adicionar um arquivo ou definir uma chave do Registro), que pode ser usado para criar uma coleção de computadores que estão prontos para atualização ou que exigem uma ação antes de ser atualizados.|  
|_SMSTSPackageID|Armazena a ID da atual sequência de tarefas em execução Esta ID usa o mesmo formato que uma ID de pacote de software do Configuration Manager.<br /><br /> Exemplo:<br /><br /> **HJT00001**|  
|_SMSTSPackageName|Armazena o nome da sequência de tarefas atual em execução especificada pelo administrador do Configuration Manager quando ela é criada.<br /><br /> Exemplo:<br /><br /> **Implantar a sequência de tarefas do Windows 10**|  
|_SMSTSSetupRollback|Especifica se a Instalação do sistema operacional executou uma operação de reversão. Os valores das variáveis podem ser **true** ou **false**.|  
|_SMSTSRunFromDP|Definido como **true** se a sequência de tarefas atual estiver em execução no modo de execução do ponto de distribuição, o que significa que o gerenciador de sequência de tarefas obtém o pacote necessário para compartilhamentos de ponto de distribuição.|  
|_SMSTSSiteCode|Especifica o código do site do Configuration Manager.<br /><br /> Exemplo:<br /><br /> **ABC**|  
|_SMSTSType|Especifica o tipo da sequência de tarefas em execução atual. Ele pode ter os seguintes valores:<br /><br /> **1** - indica uma sequência de tarefas genéricas.<br /><br /> **2** - indica uma sequência de tarefas de implantação do sistema operacional.|  
|_SMSTSTimezone|A variável _SMSTSTimezone armazena as informações de fuso horário no seguinte formato (sem espaços):<br /><br /> Diferença, DiferençaPadrão, DiferençaDoHorárioDeVerão, DataPadrão.wAno, wMês, wDiaDaSemana, wDia, wHora, wMinuto, wSegundo, wMilissegundos, DataDoHorárioDeVerão.wAno, wMês, wDiaDaSemana, wDia, wHora, wMinuto, wSegundo, wMilissegundos, NomePadrão, NomePadrão<br /><br /> Exemplo:<br /><br /> Para a hora do Leste dos Estados Unidos e Canadá, o valor seria **300,0,-60,0,11,0,1,2,0,0,0,0,3,0,2,2,0,0,0 hora oficial do Leste dos EUA, o horário de verão do Leste**|  
|_SMSTSUseCRL|Especifica se a sequência de tarefas usa a lista de revogação de certificado ao usar um certificado Secure Socket Layer (SSL) para se comunicar com o ponto de gerenciamento.|  
|_SMSTSUserStarted|Especifica se uma sequência de tarefas é iniciada por um usuário. Essa variável é definida somente se a sequência de tarefas é iniciada por meio do Centro de Software. Por exemplo, se **_SMSTSLaunchMode** está definido como **SMS**. A variável pode ter os seguintes valores:<br /><br /> -   **true** - Especifica que a sequência de tarefas é iniciada manualmente por um usuário por meio do Centro de Software.<br />-   **false** – especifica que a sequência de tarefas é iniciada automaticamente pelo agendador do Configuration Manager.|  
|_SMSTSUseSSL|Especifica se a sequência de tarefas usa SSL para se comunicar com o ponto de gerenciamento do Configuration Manager. Se seu site estiver em execução no modo nativo, o valor é definido como **true**.|  
|_SMSTSWTG|Especifica se o computador está executando como um dispositivo Windows To Go.|  
|OSDPreserveDriveLetter|A partir do Configuration Manager versão 1606, essa variável de sequência de tarefas foi preterida. Durante uma implantação de sistema operacional, por padrão, a Instalação do Windows determina a melhor letra da unidade a ser usada (geralmente, C:). <br /><br />Em versões anteriores, a variável OSDPreverveDriveLetter determina se a sequência de tarefas usa ou não a letra da unidade capturada no arquivo WIM da imagem do sistema operacional ao aplicar essa imagem em um computador de destino. É possível definir o valor desta variável como **False** para usar o local especificado para a configuração **Destino** na etapa da sequência de tarefas **Aplicar Sistema Operacional** . Para obter mais informações, consulte [Apply Operating System Image](task-sequence-steps.md#BKMK_ApplyOperatingSystemImage).|  
|SMSTSAssignmentsDownloadInterval|Use esta variável para especificar o número de segundos para aguardar antes que o cliente tente baixar a política desde a última tentativa (que não retornou nenhuma política). Por padrão, o cliente aguardará **0** segundos antes de tentar novamente.<br /><br /> Você pode definir essa variável usando um comando prestart da mídia ou PXE.|  
|SMSTSAssignmentsDownloadRetry|Use esta variável para especificar o número de vezes que um cliente tentará baixar a política depois que nenhuma política foi encontrada na primeira tentativa. Por padrão, o cliente tentará novamente **0** vezes.<br /><br /> Você pode definir essa variável usando um comando prestart da mídia ou PXE.|  
|SMSTSAssignUsersMode|Especifica como uma sequência de tarefas associa os usuários ao computador de destino. Defina a variável para um dos seguintes valores:<br /><br /> -   Automático: a sequência de tarefas cria uma relação entre os usuários especificados e o computador de destino quando implanta o sistema operacional no computador de destino.<br />-   Pendente: a sequência de tarefas cria uma relação entre o usuário especificado e o computador de destino, mas espera a aprovação do usuário administrativo antes que a relação seja definida.<br />-   Desabilitado: a sequência de tarefas não associa os usuários ao computador de destino quando implanta o sistema operacional.|  
|SMSTSDownloadProgram|Use essa variável para especificar um Provedor de Conteúdo Alternativo, um programa de download usado para baixar conteúdo em vez do programa de download padrão do Configuration Manager, para a sequência de tarefas. Como parte do processo de download do conteúdo, a sequência de tarefas verifica a variável para um programa de download especificado. Se especificado, a sequência de tarefas executa o programa para realizar o download.|  
|SMSTSDownloadRetryCount|Use essa variável para especificar o número de vezes que o Configuration Manager tenta baixar conteúdo de um ponto de distribuição. Por padrão, o cliente tentará novamente **2** vezes.|  
|SMSTSDownloadRetryDelay|Use essa variável para especificar o número de segundos que o Configuration Manager aguarda antes de tentar baixar conteúdo novamente de um ponto de distribuição. Por padrão, o cliente aguardará **15** segundos antes de tentar novamente.|  
|SMSTSErrorDialogTimeout|Quando ocorre um erro em uma sequência de tarefas, é exibida uma caixa de diálogo que é automaticamente descartada após um número de segundos especificado por essa variável. Por padrão, a caixa de diálogo é automaticamente descartada após **900** segundos (15 minutos).|  
|TSErrorOnWarning|Use essa variável para especificar se o mecanismo de sequência de tarefas considera um aviso detectado como um erro durante a etapa de sequência de tarefas de instalação do aplicativo. A sequência de tarefas define a variável _TSAppInstallStatus de acordo com o **Aviso** quando um ou mais aplicativos, ou uma dependência necessária, não foram instalados pois um requisito não foi atendido. Quando você define a variável TSErrorOnWarning como **True** e a variável _TSAppInstallStatus é definida como Aviso, ele será tratado como um erro. Um valor de **False** é o comportamento padrão.|  
|SMSTSLanguageFolder|Use essa variável para alterar o idioma de exibição de uma imagem de inicialização neutra de idioma.|  
|SMSTSLocalDataDrive|Especifica onde os arquivos temporários são armazenados no computador de destino enquanto a sequência de tarefas está em execução.<br /><br /> Essa variável deve ser definida antes do início da sequência de tarefas, como definindo uma variável de coleta. Depois de iniciada a sequência de tarefas, o Configuration Manager define a variável _SMSTSMDataPath depois que a sequência de tarefas é iniciada.|  
|SMSTSMPListRequestTimeout|Use essa variável para especificar quantos milissegundos uma sequência de tarefas espera antes de tentar instalar novamente uma atualização de software ou aplicativo após uma falha ao recuperar a lista de ponto de gerenciamento dos serviços de localização. Por padrão, a sequência de tarefas espera 60.000 milissegundos (60 segundos) antes de tentar novamente a etapa e repetições até três vezes. Essa variável é aplicável somente às etapas da sequência de tarefas Instalar Aplicativo e Instalar Atualizações de Software.|  
|SMSTSMPListRequestTimeoutEnabled|Use essa variável para permitir que solicitações MPList repetidas atualizem o cliente se este não estiver na intranet. <br />Por padrão, essa variável é definida como True. Quando os clientes estão na Internet, você pode definir essa variável como False para evitar atrasos desnecessários. Essa variável é aplicável somente às etapas da sequência de tarefas Instalar Aplicativo e Instalar Atualizações de Software.|  
|SMSTSPeerDownload|Use essa variável para habilitar o cliente a usar o Cache de sistemas pares do Windows PE.<br /><br /> Exemplo:<br /><br /> SMSTSPeerDownload = **TRUE** habilita essa funcionalidade.|  
|SMSTSPeerRequestPort|Use essa variável para o cache de sistemas pares do Windows PE para especificar uma porta de rede personalizada a ser usada para a difusão inicial quando as portas padrão configuradas nas Configurações do Cliente (8003 e 8004) não forem usadas.|  
|SMSTSPersistContent|Use essa variável para manter temporariamente o conteúdo no cache da sequência de tarefas.|  
|SMSTSPostAction|Especifica um comando que é executado após a sequência de tarefas. Por exemplo, você pode usar essa variável para especificar um script que permite filtros de gravação em dispositivos inseridos depois que o a sequência de tarefas implanta um sistema operacional no dispositivo.|  
|SMSTSPreferredAdvertID|Força uma implantação direcionada específica no computador de destino a ser executada. Isso pode ser definido por meio de um comando pré-início da mídia ou PXE. Se essa variável for definida, a sequência de tarefas substitui todas as implantações necessárias.|  
|SMSTSPreserveContent|Essa variável sinaliza o conteúdo na sequência de tarefas a ser mantido no cache do cliente do Configuration Manager após a implantação. Isso é diferente de usar SMSTSPersistContent, que apenas preserva o conteúdo durante a sequência de tarefas e usa o cache da sequência de tarefas, e não o cache do cliente do Configuration Manager.<br /><br /> Exemplo:<br /><br /> SMSTSPreserveContent = **TRUE** habilita essa funcionalidade.|  
|SMSTSRebootDelay|Especifica o número de segundos a esperar antes do computador ser reiniciado. O Gerenciador de sequência de tarefas exibirá uma caixa de diálogo de notificação antes da reinicialização, se essa variável não for definida como 0.<br /><br /> Exemplos:<br /><br /> **0**<br /><br /> **30**|  
|SMSTSRebootMessage|Especifica a mensagem a ser exibida na caixa de diálogo de desligamento quando for solicitada uma reinicialização. Se essa variável não for definida, será exibida uma mensagem padrão.<br /><br /> Exemplo:<br /><br /> **Este computador está sendo reiniciado pelo Gerenciador de sequência de tarefas**.|  
|SMSTSRebootRequested|Indica que uma reinicialização será solicitada após a etapa da sequência de tarefas atual ser concluída. Se uma reinicialização for necessária, basta definir essa variável como **true**, e o Gerenciador de sequência de tarefas reiniciará o computador após essa etapa de sequência de tarefas. A etapa de sequência de tarefas deve definir essa variável de sequência de tarefas se exigir a reinicialização para concluir a etapa de sequência de tarefas. Depois que o computador for reiniciado, a sequência de tarefas continuará sendo executada na próxima etapa de sequência de tarefas.|  
|SMSTSRetryRequested|Solicita uma nova tentativa após a etapa atual ser concluída. Se essa variável de sequência de tarefas for definida, o **SMSTSRebootRequested** também deve ser definido como **true**. Depois que o computador for reiniciado, o Gerenciador de sequência de tarefas executará novamente a mesma etapa de sequência de tarefas.|  
|SMSTSSoftwareUpdateScanTimeout| Possibilita controlar o tempo limite para a verificação de atualizações de software durante a etapa de sequência de tarefas [Instalar Atualizações de Software](task-sequence-steps.md#BKMK_InstallSoftwareUpdates). Por exemplo, você poderá aumentar o valor padrão se tiver muitas atualizações de software para instalar. O valor padrão é 30 minutos. |
|SMSTSUDAUsers|Especifica o usuário principal do computador de destino. Especifique os usuários usando o seguinte formato. Separe vários usuários usando uma vírgula (,).<br /><br /> Exemplo:<br /><br /> **domínio\usuário1, domínio\usuário2, domínio\usuário3**<br /><br /> Para obter mais informações sobre como associar usuários ao computador de destino, consulte [Associate users with a destination computer (Associar usuários a um computador de destino)](../get-started/associate-users-with-a-destination-computer.md).|  
|SMSTSWaitForSecondReboot|A partir da versão 1602 no Configuration Manager, essa variável opcional da sequência de tarefas está disponível para ajudar a controlar o comportamento do cliente quando uma instalação de atualização de software exige duas reinicializações. Essa variável deve ser definida antes da etapa [Instalar Atualizações de Software](task-sequence-steps.md#BKMK_InstallSoftwareUpdates) para evitar a falha da sequência de tarefas devido à segunda reinicialização depois da instalação de atualização de software.<br /><br /> Defina o valor de SMSTSWaitForSecondReboot em segundos para especificar por quanto tempo a sequência de tarefas é pausada durante a etapa Instalar Atualizações de Software quando o computador é reiniciado, a fim de permitir tempo suficiente caso haja uma segunda reinicialização. <br />Por exemplo, se você definir SMSTSWaitForSecondReboot para 600, a sequência de tarefas será pausada por 10 minutos após uma reinicialização antes da execução das etapas adicionais da sequência de tarefas. Isso é útil quando centenas de atualizações de software são instaladas em uma única etapa da sequência de tarefas Instalar Atualizações de Software.|  



<!--HONumber=Nov16_HO1-->


